<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Defined Type: dispatcher::farm
  
    &mdash; Documentation by YARD 0.9.12
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "puppet_defined_types::dispatcher::farm";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../puppet_defined_type_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (d)</a> &raquo;
    <span class='title'><span class='object_link'>Defined Types</span></span>
     &raquo; 
    <span class="title">dispatcher::farm</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="puppet_class_list_link"
        href="../puppet_class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Defined Type: dispatcher::farm</h1>
<div class="box_info">
  <dl>
    <dt>Defined in:</dt>
    <dd>
      manifests/farm.pp
    </dd>
  </dl>
</div>

  <h2>Summary</h2>
  Set a farm configuration that is included in the dispatcher any file.

<h2>Overview</h2>
<div class="docstring">
  <div class="discussion">
    
<p>dispatcher::farm</p>

<p>Defenis a farm configuration</p>

  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Minimal example</p>
</div></p>
      
      <pre class="example code"><code>dispatcher::farm { &#39;site&#39;:
  docroot =&gt; &#39;/var/www/html&#39;
}</code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ensure</span>
      
      
        <span class='type'>(<tt>Enum['present', 'absent']</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>lookup(&#39;dispatcher::farm::ensure&#39;)</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Changes the state of the dispatcher farm configuration. Valid options:
present or absent.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>docroot</span>
      
      
        <span class='type'>(<tt>Stdlib::Absolutepath</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Sets the cache /docroot rule.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>allow_authorized</span>
      
      
        <span class='type'>(<tt>Optional[Integer[0, 1]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>lookup(&#39;dispatcher::farm::allow_authorized&#39;)</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Sets the cache /allowAuthorized rule.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>allowed_clients</span>
      
      
        <span class='type'>(<tt>Array[Hash]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>lookup(&#39;dispatcher::farm::allowed_clients&#39;)</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Sets the cache /allowedClients section.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>cache_headers</span>
      
      
        <span class='type'>(<tt>Optional[Array[String]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>lookup(&#39;dispatcher::farm::cache_headers&#39;)</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Sets the cache /headers section.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>cache_rules</span>
      
      
        <span class='type'>(<tt>Array[Hash]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>lookup(&#39;dispatcher::farm::cache_rules&#39;)</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Sets the cache /rules section.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>cache_ttl</span>
      
      
        <span class='type'>(<tt>Optional[Integer[0, 1]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>lookup(&#39;dispatcher::farm::cache_ttl&#39;)</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Sets the cache /enableTTL rule.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>client_headers</span>
      
      
        <span class='type'>(<tt>Array[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>lookup(&#39;dispatcher::farm::client_headers&#39;)</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Sets the /clientheaders rule.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>failover</span>
      
      
        <span class='type'>(<tt>Optional[Integer[0, 1]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>lookup(&#39;dispatcher::farm::failover&#39;)</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Sets the /failover rule.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>filters</span>
      
      
        <span class='type'>(<tt>Array[Hash]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>lookup(&#39;dispatcher::farm::filters&#39;)</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Sets the /fiters section.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>grace_period</span>
      
      
        <span class='type'>(<tt>Optional[Integer[1]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>lookup(&#39;dispatcher::farm::grace_period&#39;)</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Sets the cache /grace rule.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>health_check_url</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>lookup(&#39;dispatcher::farm::health_check_url&#39;)</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Sets the cache /ignoreUrlParams section.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>ignore_parameters</span>
      
      
        <span class='type'>(<tt>Optional[Array[Hash]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>lookup(&#39;dispatcher::farm::ignore_parameters&#39;)</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Sets the cache /ignoreUrlParams section.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>invalidate</span>
      
      
        <span class='type'>(<tt>Optional[Array[Hash]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>lookup(&#39;dispatcher::farm::invalidate&#39;)</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Sets the cache /invalidate section.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>invalidate_handler</span>
      
      
        <span class='type'>(<tt>Optional[Stdlib::Absolutepath]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>lookup(&#39;dispatcher::farm::invalidate_handler&#39;)</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Sets the cache /invalidateHandler rule.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>priority</span>
      
      
        <span class='type'>(<tt>Integer[0, 99]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>lookup(&#39;dispatcher::farm::priority&#39;)</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Defines a priority for the resulting farm configuration to be included in
the global dispatcher farm configuration. Farms with a lower priority will
be included first. Farms with the same priority will be included in
alphabetical order.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>propagate_synd_post</span>
      
      
        <span class='type'>(<tt>Optional[Integer[0, 1]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>lookup(&#39;dispatcher::farm::propagate_synd_post&#39;)</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Sets the /propagateSyndPost rule.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>renders</span>
      
      
        <span class='type'>(<tt>Array[Hash]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>lookup(&#39;dispatcher::farm::renders&#39;)</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Sets the /renders section.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>retries</span>
      
      
        <span class='type'>(<tt>Optional[Integer[1]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>lookup(&#39;dispatcher::farm::retries&#39;)</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Sets the /numberOfRetries rule.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>retry_delay</span>
      
      
        <span class='type'>(<tt>Optional[Integer[1]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>lookup(&#39;dispatcher::farm::retry_delay&#39;)</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Sets the /retryDelay rule.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>serve_stale</span>
      
      
        <span class='type'>(<tt>Optional[Integer[0, 1]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>lookup(&#39;dispatcher::farm::serve_stale&#39;)</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Sets the cache /serveStaleOnError rule.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>session_management</span>
      
      
        <span class='type'>(<tt>Optional[Hash]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>lookup(&#39;dispatcher::farm::session_management&#39;)</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Sets the /sessionmanagement section.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>stat_file</span>
      
      
        <span class='type'>(<tt>Optional[Stdlib::Absolutepath]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>lookup(&#39;dispatcher::farm::stat_file&#39;)</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Sets the cache /statfile rule.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>stat_files_level</span>
      
      
        <span class='type'>(<tt>Optional[Integer[0]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>lookup(&#39;dispatcher::farm::stat_files_level&#39;)</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Sets the cache /statfileslevel rule.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>statistics</span>
      
      
        <span class='type'>(<tt>Optional[Array[Hash]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>lookup(&#39;dispatcher::farm::statistics&#39;)</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Sets the /statistics section.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>sticky_connections</span>
      
      
        <span class='type'>(<tt>Optional[Array[String]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>lookup(&#39;dispatcher::farm::sticky_connections&#39;)</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Sets the /stickyConnectionsFor rule or /stickyConnectionsFor section based
on value.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>unavailable_penalty</span>
      
      
        <span class='type'>(<tt>Optional[Integer[1]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>lookup(&#39;dispatcher::farm::unavailable_penalty&#39;)</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Sets the /unavailablePenalty rule.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>vanity_urls</span>
      
      
        <span class='type'>(<tt>Optional[Hash]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>lookup(&#39;dispatcher::farm::vanity_urls&#39;)</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Sets the /vanity_urls section.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>virtualhosts</span>
      
      
        <span class='type'>(<tt>Array[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>lookup(&#39;dispatcher::farm::virtualhosts&#39;)</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Sets the /virtualhosts section.</p>
</div>
      
    </li>
  
</ul>


</div><div class="method_details_list">
  <table class="source_code">
    <tr>
      <td>
        <pre class="lines">


41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132</pre>
      </td>
      <td>
        <pre class="code"><span class="info file"># File 'manifests/farm.pp', line 41</span>

define dispatcher::farm(
  Enum[&#39;present&#39;, &#39;absent&#39;] $ensure = lookup(&#39;dispatcher::farm::ensure&#39;),
  Stdlib::Absolutepath $docroot,
  Optional[Integer[0, 1]] $allow_authorized = lookup(&#39;dispatcher::farm::allow_authorized&#39;),
  Array[Hash] $allowed_clients = lookup(&#39;dispatcher::farm::allowed_clients&#39;),
  Optional[Array[String]] $cache_headers = lookup(&#39;dispatcher::farm::cache_headers&#39;),
  Array[Hash] $cache_rules = lookup(&#39;dispatcher::farm::cache_rules&#39;),
  Optional[Integer[0, 1]] $cache_ttl = lookup(&#39;dispatcher::farm::cache_ttl&#39;),
  Array[String] $client_headers = lookup(&#39;dispatcher::farm::client_headers&#39;),
  Optional[Integer[0, 1]] $failover = lookup(&#39;dispatcher::farm::failover&#39;),
  Array[Hash] $filters = lookup(&#39;dispatcher::farm::filters&#39;),
  Optional[Integer[1]] $grace_period = lookup(&#39;dispatcher::farm::grace_period&#39;),
  Optional[String] $health_check_url = lookup(&#39;dispatcher::farm::health_check_url&#39;),
  Optional[Array[Hash]] $ignore_parameters = lookup(&#39;dispatcher::farm::ignore_parameters&#39;),
  Optional[Array[Hash]] $invalidate = lookup(&#39;dispatcher::farm::invalidate&#39;),
  Optional[Stdlib::Absolutepath] $invalidate_handler = lookup(&#39;dispatcher::farm::invalidate_handler&#39;),
  Integer[0, 99] $priority = lookup(&#39;dispatcher::farm::priority&#39;),
  Optional[Integer[0, 1]] $propagate_synd_post = lookup(&#39;dispatcher::farm::propagate_synd_post&#39;),
  Array[Hash] $renders = lookup(&#39;dispatcher::farm::renders&#39;),
  Optional[Integer[1]] $retries = lookup(&#39;dispatcher::farm::retries&#39;),
  Optional[Integer[1]] $retry_delay = lookup(&#39;dispatcher::farm::retry_delay&#39;),
  Optional[Integer[0, 1]] $serve_stale = lookup(&#39;dispatcher::farm::serve_stale&#39;),
  Optional[Hash] $session_management = lookup(&#39;dispatcher::farm::session_management&#39;),
  Optional[Stdlib::Absolutepath] $stat_file = lookup(&#39;dispatcher::farm::stat_file&#39;),
  Optional[Integer[0]] $stat_files_level = lookup(&#39;dispatcher::farm::stat_files_level&#39;),
  Optional[Array[Hash]] $statistics = lookup(&#39;dispatcher::farm::statistics&#39;),
  Optional[Array[String]] $sticky_connections = lookup(&#39;dispatcher::farm::sticky_connections&#39;),
  Optional[Integer[1]] $unavailable_penalty = lookup(&#39;dispatcher::farm::unavailable_penalty&#39;),
  Optional[Hash] $vanity_urls = lookup(&#39;dispatcher::farm::vanity_urls&#39;),
  Array[String] $virtualhosts = lookup(&#39;dispatcher::farm::virtualhosts&#39;),
) {

  # Required dispatcher class because it is used by parameter defaults
  if ! defined(Class[&#39;::dispatcher&#39;]) {
    fail(&#39;You must include the dispatcher base class before using any dispatcher class or defined resources&#39;)
  }

  if $invalidate and $invalidate_handler {
    fail(&#39;Both invalidate and invalidate_handler can not be set.&#39;)
  }

  if $priority &lt; 10 {
    $priority_string = &quot;0${priority}&quot;
  }
  else {
    $priority_string = $priority
  }

  if $session_management {
    if $allow_authorized == 1 {
      fail(&#39;Allow authorized and session management are mutually exclusive.&#39;)
    }
    if !has_key($session_management, &#39;directory&#39;) {
      fail(&#39;Session management directory is not specified.&#39;)
    }
    else {
      validate_absolute_path($session_management[&#39;directory&#39;])
    }
    if has_key($session_management, &#39;encode&#39;) {
      validate_re($session_management[&#39;encode&#39;], &#39;^(md5|hex)$&#39;,
        &quot;${session_management[&#39;encode&#39;]} is not supported for session_management[&#39;encode&#39;]. Allowed values are &#39;md5&#39; and &#39;hex&#39;.&quot;)
    }
    if has_key($session_management, &#39;timeout&#39;) {
      validate_integer($session_management[&#39;timeout&#39;], undef, 0)
    }
  }

  if $vanity_urls {
    if !has_key($vanity_urls, &#39;file&#39;) {
      fail(&#39;Vanity Urls cache file is not specified.&#39;)
    }
    else {
      validate_absolute_path($vanity_urls[&#39;file&#39;])
      validate_integer($vanity_urls[&#39;delay&#39;], undef, 0)
    }
  }

  if $ensure == &#39;present&#39; {
    file { &quot;${::dispatcher::farm_path}/dispatcher.${priority_string}-${name}.inc.any&quot; :
      ensure  =&gt; $ensure,
      content =&gt; template(&quot;${module_name}/dispatcher.any.erb&quot;),
      notify  =&gt; Service[$::apache::service_name],
    }
  }
  else {
    file { &quot;${::dispatcher::farm_path}/dispatcher.${priority_string}-${name}.inc.any&quot; :
      ensure =&gt; $ensure,
      notify =&gt; Service[$::apache::service_name],
    }
  }

}</pre>
      </td>
    </tr>
  </table>
</div>
</div>

      <div id="footer">
     Generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>.
</div>

    </div>
  </body>
</html>